<div class="log-view">
  <div class="log-header">
    <h2>Quest Log</h2>
    <span class="log-counter" *ngIf="log.length > 0">{{ log.length }} entries</span>
  </div>
  
  <div class="log-content">
    <ng-container *ngIf="log.length > 0; else emptyLog">
      <ul>
        <li *ngFor="let entry of log; let i = index" 
            [ngClass]="{'success-entry': entry.success, 'fail-entry': !entry.success, 'new-entry': isNewEntry(i),
                       'exploration-entry': entry.stepType === 'exploration',
                       'encounter-entry': entry.stepType === 'encounter',
                       'treasure-entry': entry.stepType === 'treasure'}">
          <span class="entry-time">[{{ entry.timestamp | date:'shortTime' }}]</span>
          <span class="entry-icon" *ngIf="entry.stepType">
            <i class="step-icon" [ngClass]="{
              'exploration-icon': entry.stepType === 'exploration',
              'encounter-icon': entry.stepType === 'encounter',
              'treasure-icon': entry.stepType === 'treasure'
            }">{{ getStepIcon(entry.stepType) }}</i>
          </span>
          <span class="entry-message">{{ entry.message }}</span>
          <span class="entry-rewards" *ngIf="hasRewards(entry)">
            <span class="experience-reward" *ngIf="getExperienceFromEntry(entry) > 0">
              +{{ getExperienceFromEntry(entry) }} XP
            </span>
            <span class="gold-reward" *ngIf="getGoldFromEntry(entry) > 0">
              +{{ getGoldFromEntry(entry) }} Gold
            </span>
          </span>
        </li>
      </ul>
    </ng-container>
    <ng-template #emptyLog>
      <div class="empty-log">
        <p>No quests completed yet. Embark on a quest to see your adventures here!</p>
      </div>
    </ng-template>
  </div>
</div>
