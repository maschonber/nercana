<div class="combat-details">
  <!-- Combat outcome banner -->
  <div class="combat-outcome" [ngClass]="getCombatOutcomeClass(entry.combatResult!.outcome)">
    {{ getCombatOutcomeText(entry.combatResult!.outcome) }}
  </div>
  
  <!-- Monster information -->
  <div class="monster-info" *ngIf="entry.monster">
    <div class="monster-header">
      <h4>{{ entry.monster.name }}</h4>
      <span class="monster-type">{{ entry.monster.type }}</span>
    </div>
    <p class="monster-description">{{ entry.monster.description }}</p>
    <div class="stats-container">
      <div class="stat-item">
        <span class="stat-label">Attack</span>
        <span class="stat-value">{{ entry.monster.attack }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Defense</span>
        <span class="stat-value">{{ entry.monster.defense }}</span>
      </div>
    </div>
  </div>
  
  <!-- Combat turns -->
  <div class="combat-turns">
    <h4>Combat Summary</h4>
    <div class="combat-turn" 
         *ngFor="let turn of entry.combatResult!.turns" 
         [ngClass]="getTurnActorClass(turn)">
      <div class="turn-info">
        <span class="turn-number">Turn {{ turn.turnNumber }}</span>
        <span class="turn-actor">{{ getTurnActorName(turn) }}</span>
      </div>
      <div class="turn-action">
        <span class="action-description">{{ turn.action.description }}</span>
        <span *ngIf="turn.action.damage" class="damage-indicator">
          {{ turn.action.damage }} damage
        </span>
        <span *ngIf="!turn.action.success" class="action-failed">
          (Failed)
        </span>
      </div>
      <!-- Health status after the turn -->
      <div class="turn-health-status">
        <div class="health-info">
          <span class="health-label">You: {{ turn.heroHealthAfter }} HP</span>
          <span class="health-label">{{ entry.monster?.name }}: {{ turn.monsterHealthAfter }} HP</span>
        </div>
          <!-- Health bars -->
        <div class="health-bars">
          <div class="health-bar-container">
            <div class="health-bar">
              <div class="health-fill hero-health" 
                   [style.width.%]="getHealthPercentage(turn.heroHealthAfter, hero().maxHealth)">
              </div>
            </div>
          </div>
          <div class="health-bar-container">
            <div class="health-bar">
              <div class="health-fill monster-health" 
                   [style.width.%]="getHealthPercentage(turn.monsterHealthAfter, entry.monster?.maxHealth || 100)">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Combat summary -->
  <div class="combat-summary">
    <p>{{ entry.combatResult!.summary }}</p>
  </div>
  
  <!-- Combat rewards recap -->
  <div class="combat-rewards" *ngIf="entry.combatResult!.experienceGained > 0 || entry.combatResult!.goldGained > 0">
    <h4>Rewards</h4>
    <div class="rewards-container">
      <span *ngIf="entry.combatResult!.experienceGained > 0" class="experience-reward">
        +{{ entry.combatResult!.experienceGained }} XP
      </span>
      <span *ngIf="entry.combatResult!.goldGained > 0" class="gold-reward">
        +{{ entry.combatResult!.goldGained }} Gold
      </span>
    </div>
  </div>
</div>
